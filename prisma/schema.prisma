generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

enum UserRole {
  CANDIDATE
  ADMIN
}

enum ApplicationStatus {
  PENDING
  ACCEPTED
  REJECTED
}

model User {
  id           String        @id @default(uuid())
  authId       String        @unique
  email        String        @unique
  firstName    String
  lastName     String
  role         UserRole      @default(CANDIDATE)
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  applications Application[]

  @@map("users")
}

model Application {
  id     String @id @default(uuid())
  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  program      String
  rhythm       String
  campus       String
  currentLevel String
  currentSchool String

  firstName    String
  lastName     String
  email        String
  phone        String
  dateOfBirth  DateTime
  nationality  String

  motivationLetter String
  discoveryChannel String

  cvUrl         String?
  idDocumentUrl String?

  status          ApplicationStatus @default(PENDING)
  statusUpdatedAt DateTime?
  createdAt       DateTime          @default(now())
  updatedAt       DateTime          @updatedAt

  @@map("applications")
}